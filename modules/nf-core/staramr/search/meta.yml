---
# yaml-language-server: $schema=https://raw.githubusercontent.com/nf-core/modules/master/modules/yaml-schema.json
name: "staramr_search"
description: "Scans genome contigs against the ResFinder, PlasmidFinder, and PointFinder databases"
keywords:
  - amr
  - plasmid
  - mlst
  - genomics
tools:
  - "staramr":
      description: "Scan genome contigs against the ResFinder and PointFinder databases"
      homepage: "https://github.com/phac-nml/staramr"
      documentation: "https://github.com/phac-nml/staramr"
      tool_dev_url: "https://github.com/phac-nml/staramr"
      doi: "10.5281/zenodo.7262331"
      licence: "['Apache Software License']"

input:
  - meta:
      type: map
      description: |
        Groovy Map containing sample information.
        e.g. `[ id:'test', single_end:false ]`

  - genomes_fastas:
      type: file
      description: |
        Assembled/complete genome(s) in FASTA format to search for AMR/MLST/Plasmids.
        Supports passing a single genome (as a single fasta file) or multiple genomes
        to process and compile into the same report (as multiple fasta files).
      pattern: "*.{fasta,fna,fsa,fa}"

output:
  - meta:
      type: map
      description: |
        Groovy Map containing sample information
        e.g. `[ id:'test', single_end:false ]`
  - versions:
      type: file
      description: File containing software versions
      pattern: "versions.yml"
  - results_xlsx:
      type: file
      description: Excel spreadsheet containing summary of StarAMR results.
      pattern: "*_results/results.xlsx"
  - summary_tsv:
      type: file
      description: |
        A summary of all detected AMR genes/mutations/plasmids/sequence type in each genome, one genome per line.
        A series of descriptive statistics is also provided for each genome,
        as well as feedback for whether or not the genome passes several quality metrics and if not,
        feedback on why the genome fails.
      pattern: "*_results/summary.tsv"
  - detailed_summary_tsv:
      type: file
      description: |
        A summary of all detected AMR genes/mutations/plasmids/sequence type in each genome, one genome per line.
        A series of descriptive statistics is also provided for each genome,
        as well as feedback for whether or not the genome passes several quality metrics and if not,
        feedback on why the genome fails.
      pattern: "*_results/detailed_summary.tsv"
  - resfinder_tsv:
      type: file
      description: A tabular file of each AMR gene and additional BLAST information from the ResFinder database, one gene per line.
      pattern: "*_results/resfinder.tsv"
  - plasmidfinder_tsv:
      type: file
      description: A tabular file of each AMR plasmid type and additional BLAST information from the PlasmidFinder database, one plasmid type per line.
      pattern: "*_results/plasmidfinder.tsv"
  - mlst_tsv:
      type: file
      description: A tabular file of each multi-locus sequence type (MLST) and it's corresponding locus/alleles, one genome per line.
      pattern: "*_results/mlst.tsv"
  - settings_txt:
      type: file
      description: The command-line, database versions, and other settings used to run staramr.
      pattern: "*_results/settings.txt"
  - pointfinder_tsv:
      type: file
      description: An optional tabular file of each AMR point mutation and additional BLAST information from the PointFinder database, one gene per line.
      pattern: "*_results/pointfinder.tsv"
authors:
  - "@apetkau"
